<div class="space-y-6">
  <div class="flex justify-between items-center">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">Gestión de Alumnos</h1>
      <p class="text-gray-600 mt-2">Administra el catálogo de estudiantes</p>
    </div>
    <button
      (click)="openDialog()"
      class="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors"
    >
      <app-icon name="user-plus" [size]="16"></app-icon>
      Agregar Alumno
    </button>
  </div>

  
  <div class="bg-white rounded-lg shadow">
    <div class="p-6 border-b">
      <h2 class="text-lg font-semibold text-gray-900">Lista de Alumnos</h2>
      <p class="text-sm text-gray-600 mt-1">Total: {{ alumnos().length }} estudiantes registrados</p>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50 border-b">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nombre Completo</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Grado</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Grupo</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase">Acciones</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          @for (alumno of getSortedAlumnos(); track alumno.id) {
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-4 text-sm text-gray-900">
                {{ alumno.apellidoPaterno }} {{ alumno.apellidoMaterno }} {{ alumno.nombre }}
              </td>
              <td class="px-6 py-4 text-sm text-gray-600">{{ alumno.grado }}°</td>
              <td class="px-6 py-4 text-sm text-gray-600">{{ alumno.grupo }}</td>
              <td class="px-6 py-4 text-right space-x-2">
                <button
                  (click)="openDialog(alumno)"
                  class="inline-flex items-center p-2 text-gray-600 hover:text-indigo-600 hover:bg-gray-100 rounded"
                >
                  <app-icon name="edit" [size]="16"></app-icon>
                </button>
                <button
                  (click)="deleteAlumno(alumno.id)"
                  class="inline-flex items-center p-2 text-gray-600 hover:text-red-600 hover:bg-gray-100 rounded"
                >
                  <app-icon name="trash" [size]="16"></app-icon>
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal Dialog -->
  @if (isDialogOpen()) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
        <div class="p-6 border-b">
          <h3 class="text-lg font-semibold text-gray-900">
            {{ editingAlumno() ? 'Editar Alumno' : 'Agregar Nuevo Alumno' }}
          </h3>
          <p class="text-sm text-gray-600 mt-1">Completa la información del estudiante</p>
        </div>
        
        <form (ngSubmit)="onSubmit()" class="p-6 space-y-4">
          <div class="space-y-2">
            <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre(s)</label>
            <input
              id="nombre"
              type="text"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="Juan"
              [value]="formData().nombre"
              (input)="updateNombre($event)"
            />
          </div>
          
          <div class="space-y-2">
            <label for="apellidoPaterno" class="block text-sm font-medium text-gray-700">Apellido Paterno</label>
            <input
              id="apellidoPaterno"
              type="text"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="Pérez"
              [value]="formData().apellidoPaterno"
              (input)="updateApellidoPaterno($event)"
            />
          </div>
          
          <div class="space-y-2">
            <label for="apellidoMaterno" class="block text-sm font-medium text-gray-700">Apellido Materno</label>
            <input
              id="apellidoMaterno"
              type="text"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="Martínez"
              [value]="formData().apellidoMaterno"
              (input)="updateApellidoMaterno($event)"
            />
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div class="space-y-2">
              <label for="grado" class="block text-sm font-medium text-gray-700">Grado</label>
              <select
                id="grado"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                [value]="formData().grado"
                (change)="updateGrado($event)"
              >
                <option [value]="1">1°</option>
                <option [value]="2">2°</option>
                <option [value]="3">3°</option>
              </select>
            </div>
            
            <div class="space-y-2">
              <label for="grupo" class="block text-sm font-medium text-gray-700">Grupo</label>
              <select
                id="grupo"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                [value]="formData().grupo"
                (change)="updateGrupo($event)"
              >
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
              </select>
            </div>
          </div>
          
          <div class="flex justify-end gap-2 pt-4">
            <button
              type="button"
              (click)="closeDialog()"
              class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"
            >
              Cancelar
            </button>
            <button
              type="submit"
              class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"
            >
              {{ editingAlumno() ? 'Actualizar' : 'Agregar' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  }
</div>
